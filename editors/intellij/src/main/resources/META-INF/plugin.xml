<!-- Basic plugin configuration -->
<idea-plugin>
    <!-- Unique id for the plugin. Must stay constant for the lifetime of the plugin. -->
    <id>org.tinymist.intellij</id>

    <!-- Text to display as name on Settings | Plugins page -->
    <name>Tinymist Typst</name>
    <version>0.1.0</version> <!-- This will be overwritten by gradle -->

    <!-- Text to display as company information on Settings | Plugins page -->
    <vendor email="your.email@example.com" url="example.com"> &amp; Contributors</vendor>

    <!-- Description of the plugin -->
    <description><![CDATA[
    Provides <a href="https://typst.app/">Typst</a> language support for IntelliJ-based IDEs using the <a href="https://github.com/Myzel394/tinymist">tinymist</a> language server.
    <br/>
    Features include:
    <ul>
        <li>Syntax Highlighting (via LSP semantic tokens)</li>
        <li>Error Diagnostics</li>
        <li>Completions</li>
        <li>Hover Information</li>
        <li>Go to Definition</li>
        <!-- Add more features as they are implemented -->
    </ul>
    Requires the tinymist LSP executable to be installed and available on PATH.
    ]]></description>

    <!-- Change notes for the plugin -->
    <change-notes><![CDATA[
    Initial release.
    ]]></change-notes>

    <!-- Minimum and maximum supported IntelliJ platform versions. -->
    <idea-version since-build="233" until-build="241.*"/>

    <!-- Declare dependencies on other plugins or modules -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.ultimate</depends> <!-- Required for LSP API -->

    <!-- Extension points defined by the plugin. -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Basic language support -->
        <fileType name="Typst file" implementationClass="org.tinymist.intellij.TypstFileType" fieldName="INSTANCE" language="Typst" extensions="typ"/>
        <lang.parserDefinition language="Typst" implementationClass="org.tinymist.intellij.TypstParserDefinition"/>
        <lang.syntaxHighlighterFactory language="Typst" implementationClass="org.tinymist.intellij.TypstSyntaxHighlighterFactory"/>

        <!-- LSP Integration -->
        <!-- Register the LspServerSupportProvider implementation -->
        <platform.lsp.serverSupportProvider implementation="org.tinymist.intellij.lsp.TinymistLspServerSupportProvider"/>
    </extensions>

    <actions>
        <!-- Add actions here -->
    </actions>

    <!-- LSP Integration -->
    <!-- Register the LspServerSupportProvider implementation -->
    <!-- MOVED INSIDE com.intellij extensions -->
    <!-- <platform.lsp.serverSupportProvider implementation="org.tinymist.intellij.lsp.TinymistLspServerSupportProvider"/> -->

</idea-plugin> 