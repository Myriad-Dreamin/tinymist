<!-- Basic plugin configuration -->
<idea-plugin>
  <!-- Unique id for the plugin. Must stay constant for the lifetime of the plugin. -->
  <id>org.tinymist.intellij</id>
  <!-- Text to display as name on Settings | Plugins page -->
  <name>Tinymist Typst</name>
  <version>0.1.0</version>
  <!-- This will be overwritten by gradle -->
  <!-- Text to display as company information on Settings | Plugins page -->
  <vendor email="your.email@example.com" url="https://github.com/Myzel394/tinymist">Myzel394 &amp; Contributors</vendor>
  <!-- Description of the plugin -->
  <description><![CDATA[Provides Typst language support using the tinymist LSP server.]]></description>
  <!-- Change notes for the plugin -->
  <change-notes><![CDATA[Initial release.]]></change-notes>
  <!-- Minimum and maximum supported IntelliJ platform versions. -->
  <idea-version since-build="233" until-build="241.*" />
  <!-- Declare dependencies on other plugins or modules -->
  <depends>com.intellij.modules.platform</depends>
  <depends>com.intellij.modules.ultimate</depends>
  <!-- Recommended for LSP API -->
  <depends>org.jetbrains.plugins.lsp</depends>
  <!-- Explicit dependency on the LSP Plugin -->
  <!-- We will add lsp4ij extensions here later, not usually a direct dependency -->
  <!-- Extension points defined by the plugin. -->
  <extensions defaultExtensionNs="com.intellij">
    <!-- Basic language support -->
    <fileType name="Typst" implementationClass="org.tinymist.intellij.TypstFileType" fieldName="INSTANCE" language="Typst" extensions="typ" />
    <lang.parserDefinition language="Typst" implementationClass="org.tinymist.intellij.TypstParserDefinition" />
    <lang.syntaxHighlighterFactory language="Typst" implementationClass="org.tinymist.intellij.TypstSyntaxHighlighterFactory" />
    <!-- LSP Integration -->
    <!-- Register the LspServerSupportProvider implementation -->
    <platform.lsp.serverSupportProvider implementation="org.tinymist.intellij.lsp.TinymistLspServerSupportProvider" />
  </extensions>
  <extensions defaultExtensionNs="com.redhat.devtools.lsp4ij">
    <!-- lsp4ij server definition and language mapping will go here -->
  </extensions>
  <actions>
    <!-- Add actions here -->
  </actions>
  <!-- LSP Integration -->
  <!-- Register the LspServerSupportProvider implementation -->
  <!-- MOVED INSIDE com.intellij extensions -->
  <!-- <platform.lsp.serverSupportProvider implementation="org.tinymist.intellij.lsp.TinymistLspServerSupportProvider"/> -->
</idea-plugin>
